<section class="inventario">
  <header class="inv__header">
    <div>
      <h1>Inventario</h1>
      <p class="muted">Alta, edición y control visual con miniaturas. Exporta a Excel (CSV) y PDF (impresión).</p>
    </div>
    <div class="inv__headerBtns">
      <button class="btn btn--ghost btn--mini" id="i-exportCsv">Exportar Excel (CSV)</button>
      <button class="btn btn--mini" id="i-exportPdf">Exportar PDF</button>
    </div>
  </header>

  <div class="inv__grid">
    <div class="card">
      <div class="card__head">
        <h2 class="h2">Alta / Edición</h2>
        <div class="muted small" id="i-formMode">Modo: Alta</div>
      </div>

      <div class="divider"></div>

      <form id="i-form" class="form" autocomplete="off">
        <input type="hidden" id="i-id">

        <div class="row">
          <div class="field">
            <label>Imagen (desde dispositivo)</label>
            <input type="file" id="i-imageFile" accept="image/*">
            <small class="muted">Se guarda como miniatura en la base (dataURL).</small>
          </div>
          <div class="thumbWrap">
            <div class="thumb" id="i-thumb">IMG</div>
          </div>
        </div>

        <div class="row2">
          <div class="field">
            <label>SKU</label>
            <input id="i-sku" type="text" placeholder="SKU-1234" required>
          </div>
          <div class="field">
            <label>Código de barras</label>
            <input id="i-barcode" type="text" placeholder="750...">
          </div>
        </div>

        <div class="field">
          <label>Nombre</label>
          <input id="i-name" type="text" placeholder="Nombre del producto" required>
        </div>

        <div class="row2">
          <div class="field">
            <label>Categoría</label>
            <div class="inline">
              <select id="i-category"></select>
              <button type="button" class="btn btn--ghost btn--mini" id="i-manageCats">Gestionar</button>
            </div>
          </div>
          <div class="field">
            <label>Stock</label>
            <input id="i-stock" type="number" min="0" step="1" value="0" required>
          </div>
        </div>

        <div class="row2">
          <div class="field">
            <label>Precio</label>
            <input id="i-price" type="number" min="0" step="0.01" value="0" required>
          </div>
          <div class="field">
            <label>Costo</label>
            <input id="i-cost" type="number" min="0" step="0.01" value="0" required>
          </div>
        </div>

        <div class="row2">
          <div class="field">
            <label>Caducidad</label>
            <input id="i-exp" type="date">
          </div>
          <div class="field">
            <label>Lote</label>
            <input id="i-lot" type="text" placeholder="Lote">
          </div>
        </div>

        <div class="actions">
          <button type="button" class="btn btn--ghost" id="i-reset">Limpiar</button>
          <button type="submit" class="btn" id="i-save">Guardar</button>
        </div>
        <div class="muted small" id="i-status"></div>
      </form>
    </div>

    <div class="card">
      <div class="card__head">
        <h2 class="h2">Listado</h2>
        <div class="field invSearch">
          <label>Buscar</label>
          <input id="i-search" type="text" placeholder="Nombre / SKU / Código de barras">
        </div>
      </div>

      <div class="divider"></div>

      <div class="invList" id="i-list"></div>
      <div class="muted" id="i-empty" style="display:none;">No hay productos.</div>
    </div>
  </div>

  <div class="modal" id="i-catModal" aria-hidden="true">
    <div class="modal__backdrop" id="i-catBackdrop"></div>
    <div class="modal__panel" role="dialog" aria-modal="true" aria-label="Gestionar categorías">
      <div class="modal__head">
        <h3>Gestionar categorías</h3>
        <button class="x" id="i-catClose">✕</button>
      </div>
      <div class="divider"></div>
      <div class="field">
        <label>Nueva categoría</label>
        <div class="inline">
          <input id="i-catNew" type="text" placeholder="suplemento, agua, etc.">
          <button type="button" class="btn btn--mini" id="i-catAdd">Agregar</button>
        </div>
      </div>
      <div class="divider"></div>
      <div class="catList" id="i-catList"></div>
      <div class="muted small">Nota: no se borra una categoría si hay productos usándola.</div>
    </div>
  </div>
</section>
